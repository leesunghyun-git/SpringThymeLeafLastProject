<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<!-- Header -->

				<div id="header-wrapper">
					<header id="header" class="container">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="/">SFR</a></h1>
								<span>by 이성현</span>
							</div>

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li th:class="${curCat=='home'?'current':''}"><a href="/">Home</a></li>
									<li th:class="${curCat=='join'?'current':''}"><a href="/">회원가입</a></li>
									<li th:class="${curCat=='food'?'current':''}">
										<a href="/food/list">맛집</a>
										<ul>
											<li><a href="/food/list">맛집 목록</a></li>
											<li><a href="/food/search">맛집 검색</a></li>
											<li><a href="/food/reserve">맛집 예약</a></li>
										</ul>
									</li>
									<li th:class="${curCat=='recipe'?'current':''}">
										<a href="/recipe/list">레시피</a>
										<ul>
											<li><a href="/recipe/list">레시피 목록</a></li>
											<li><a href="/recipe/search">레시피 검색</a></li>
											<li><a href="/recipe/recommend">레시피 추천</a></li>
										</ul>
									</li>
									<li th:class="${curCat=='seoul'?'current':''}">
										<a href="/seoul/location">서울 여행</a>
										<ul>
											<li><a href="/seoul/location">명소</a></li>
											<li><a href="/seoul/nature">자연&관광</a></li>
											<li><a href="/seoul/shop">쇼핑</a></li>
											<li><a href="/seoul/youtube">동영상</a></li>
										</ul>
									</li>
									<li th:class="${curCat=='busan'?'current':''}">
										<a href="/food/list">부산 여행</a>
										<ul>
											<li><a href="/food/list">명소</a></li>
											<li><a href="/food/search">자연&관광</a></li>
											<li><a href="/food/reserve">쇼핑</a></li>
											<li><a href="/food/reserve">동영상</a></li>
										</ul>
									</li>
									<li th:class="${curCat=='movie'?'current':''}"><a href="/movie/search">동영상 검색</a></li>
									<li th:class="${curCat=='board'?'current':''}"><a href="/board/list">커뮤니티</a></li>
								</ul>
							</nav>
							<div class="row aln-right" th:if="${session.id==null}">
							<!-- <form method="post" action="/member/login"> -->
							ID:<input type="text" name=id class="input-sm" size=15 v-model="id" ref="id">
							&nbsp;
							PW:<input type="password" name=pwd class="input-sm" size=15 v-model="pwd" ref="pwd">
							&nbsp;
							<button class="btn btn-sm btn-priamry" type="button" @click="login()">로그인</button>
							<!-- </form> -->
							</div>
							<div class="row aln-right" th:if="${session.id!=null}">
							<!-- <form method="post" action="/member/logout"> -->
							[[${session.name}]]님이 로그인되었습니다.
							<button class="btn btn-sm btn-priamry" type="submit" @click="logout()">로그아웃</button>
							<!-- </form> -->
							</div>
					</header>
				</div>
<script>
const logApp=Vue.createApp({	
	data(){
		return {
			id:'',
			pwd:'',
			vo:{}
		}
	},
	methods:{
		//로그인
		login(){
			if(this.id==='')
			{
				this.$refs.id.focus()
				return
			}
			if(this.pwd==='')
			{
				this.$refs.pwd.focus()
				return
			}
			axios.get('http://localhost/member/login_vue/',{
				params:{
				id:this.id,
				pwd:this.pwd
				}
			}).then(res=>{
				console.log(res.data)
				this.vo=res.data
				if(res.data.msg==='YES')
				{
					location.href="/"
				}
				else if(res.data.msg==='NOID')
				{
					alert("아이디가 존재하지 않습니다.")
					this.id=""
					this.pwd=""
					this.$refs.id.focus()
					return
				}
				else if(res.data.msg==='NOPWD')
				{
					alert("비밀번호가 일치하지 않습니다.")
					this.pwd=""
					this.$refs.pwd.focus()
					return
				}
				else
				{
					alert("오류가 발생했습니다.")
					return
				}
			})
		},
		logout(){
			axios.get("http://localhost/member/logout_vue/").then(res=>{
				if(res.data==="YES")
				{
					location.href="/"
				}
			})
		}
		//로그아웃
	}

})
logApp.config.compilerOptions.delimiters=['((','))']
logApp.mount("#header-wrapper")
</script>
</body>
</html>